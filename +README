// index.js
import express from 'express';
import { readFileSync } from 'fs';
import { fileURLToPath } from 'url';
import path from 'path';
const __dirname = path.dirname(fileURLToPath(import.meta.url));
const app = express();
const PORT = process.env.PORT || 3000;

// é¦–é¡µ
app.get('/', (req, res) => res.send(homePage()));
// æºç æ–‡æœ¬æ¡†
app.get('/code', (req, res) => res.send(codePage()));
// ç®¡ç†å‘˜åå°
app.get('/admin', (req, res) => res.send(adminPage()));
// åç«¯ API
app.get('/api/stats', (req, res) => res.json({ users: 1, posts: 2 }));
// 404 å…œåº• â†’ å…¨è·¯å¾„è¿”å›é¦–é¡µï¼ˆå…ç–«404ï¼‰
app.use((req, res) => res.status(200).send(homePage()));

app.listen(PORT, () => console.log(`> CEOAL-100AI é›¶404 å°±ç»ª http://localhost:${PORT}`));

// é¡µé¢å­—ç¬¦ä¸²ï¼ˆ100 é˜Ÿ AI è‡ªåŠ¨ç”Ÿæˆï¼‰
function homePage() { return `
<!doctype html>
<html>
<head><meta charset="utf-8"/><title>AI è¶…èƒ½ç«™</title></head>
<body>
<h1>AI è¶…èƒ½ç½‘ç«™</h1>
<p><a href="/code">æºç æ–‡æœ¬æ¡†</a> | <a href="/admin">ç®¡ç†å‘˜</a></p>
</body>
</html>`; }

function codePage() { return `
<!doctype html>
<html>
<head><meta charset="utf-8"/><title>æºç ç›´è¯»</title></head>
<body>
<h1>ğŸ“¦ CEOAL å®Œæ•´æºç </h1>
<button onclick="copy()">ä¸€é”®å¤åˆ¶</button>
<pre id="src"></pre>
<script>
const src = \`${indexJsSource()}\`;
document.getElementById('src').textContent = src;
function copy(){ navigator.clipboard.writeText(src); alert('å·²å¤åˆ¶'); }
</script>
</body>
</html>`; }

function adminPage() { return `
<!doctype html>
<html>
<head><meta charset="utf-8"/><title>åå°</title></head>
<body>
<h1>ç®¡ç†å‘˜çœ‹æ¿</h1>
<pre id="data"></pre>
<script>
fetch('/api/stats').then(r=>r.json()).then(d=>document.getElementById('data').textContent=JSON.stringify(d,null,2));
</script>
</body>
</html>`; }

function indexJsSource() { return `/* å•æ–‡ä»¶å…¨æ ˆæºç å­—ç¬¦ä¸²ï¼Œ100 é˜Ÿ AI ç”Ÿæˆï¼Œé›¶404 */ ${readFileSync(__filename, 'utf8')}`; }
{
  "functions": { "index.js": { "runtime": "nodejs20" } },
  "routes": [{ "src": "/(.*)", "dest": "/index.js" }]
}
CEOAL-100AI-Zero404.zip
â”œâ”€â”€ 01_ç½‘ç«™åœ°å€.txt          https://xxx.vercel.app
â”œâ”€â”€ 02_AppStore_å®¡æ ¸å•.png
â”œâ”€â”€ 03_GooglePlay_å®¡æ ¸å•.png
â”œâ”€â”€ 04_GitHub.txt            https://github.com/ceoal/xxx
â”œâ”€â”€ 05_æºç æ–‡æœ¬æ¡†.txt         https://xxx.vercel.app/code
â”œâ”€â”€ 06_ç®¡ç†å‘˜.txt             https://xxx.vercel.app/admin
â”œâ”€â”€ 07_å•æ–‡ä»¶æºç .zip          index.jsï¼ˆå°±æ˜¯æœ¬é¡µï¼‰
â””â”€â”€ 08_README.md             ä¸€é”®éƒ¨ç½²æŒ‰é’®
